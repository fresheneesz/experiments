// Generated by CoffeeScript 1.6.2
var getFiles, upath, _, _fs, _wrench;

upath = require('../paths/upath');

_ = require('lodash');

_wrench = require('wrench');

_fs = require('fs');

getFiles = function(path, conditionCb) {
  var bf, bundleFilename, files, fullFilename, _i, _len, _ref;

  files = [];
  _ref = _wrench.readdirSyncRecursive(path);
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    bf = _ref[_i];
    bundleFilename = bf.replace(/\\/g, '/');
    fullFilename = upath.join(path, bundleFilename);
    if (_fs.statSync(fullFilename).isFile()) {
      if (_.isFunction(conditionCb)) {
        if (conditionCb(bundleFilename, fullFilename)) {
          files.push(bundleFilename);
        }
      } else {
        files.push(bundleFilename);
      }
    }
  }
  return files;
};

module.exports = getFiles;
